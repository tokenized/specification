code: 2001
name: InitiateRelationship
label: Initiate Relationship
description: "A message used to initiate a new relationship between 2 or more parties. The M1 container specifies the sender tx input and requested participant tx outputs."

fields:
  - name: Type
    label: Type
    description: "The type or purposed of the relationship. 0 - Conversation (direct messages), 1 - Channel (entity/business to entity/business)"
    type: uint
    size: 1
    options:
      - 0
      - 1

  - name: SeedValue
    label: Seed Value
    description: "The seed value used to derive keys for the relationship."
    type: varbin

  - name: BaseEncryptionSecret
    label: Base Encryption Secret
    description: "The base encryption secret can be used to derive encryption secrets for the relationship. Each time a message is sent, the current seed hash is added to the base encryption secret and that value is used to encrypt the message. If this value is not specified then the encryption is done with ECDH secrets between the keys in the transaction."
    type: varbin

  - name: FlagValue
    label: Flag Value
    description: "The flag value can optionally be used to identify messages in the relationship so that all members don't have to be tagged in each message. It isn't needed for two party relationships, but is recommended for relationships with more members. It will be included in it's own op return for all message transactions. It is recommended to be a random 20 byte value similar to public key hashes. The flag will be the Payload of an Envelope protocol message with a Payload Protocol ID of \"F\". If this value is not specified then there must be an output to the next key in the relationship chain for every member in the group."
    type: varbin

  - name: ProofOfIdentityType
    label: Proof of Identity Type
    description: "The type/format of the sender's proof of identity."
    type: ProofOfIdentityType

  - name: ProofOfIdentity
    label: Proof of Identity
    description: "Sender's proof of identity."
    type: varbin
    size: small

  - name: ChannelParties
    label: Channel Parties
    description: "Information about the entities in the channel. Not included if this is not a channel initiation. These represent the companies in a channel. A channel is recommended to have 2 entities and several individual members per party. The individual members can discuss terms while the parties are used for official actions."
    type: ChannelParty[]

#
# Instrument Modification Action: Token Dilutions, Call Backs/Revocations, Burning, Trade Restrictions, etc.
#

code: I3
name: InstrumentModification
label: Instrument Modification
description: "Token Dilutions, Call Backs/Revocations, burning etc."

metadata:
  validation: InstrumentCreation
  rejection: Rejection

  inputs:
    - name: Administration
      label: "Administration's Public Address"
      comments: "This action can only come from the administration."

  outputs:
    - name: Contract
      label: Contract Public Address
      comments: "The contract that this instrument currently belongs to. Must include enough for the responding action."

fields:
  - name: InstrumentType
    label: Instrument Type
    description: "Three letter character that specifies the instrument type."
    type: fixedchar
    size: 3
    example: "SHC"

  - name: InstrumentCode
    label: Instrument Code
    description: A unique code that is used to identify the instrument. It is generated by hashing the contract public key hash and the instrument index. SHA256(contract PKH + instrument index)
    type: InstrumentCode
    notes: "Cannot be changed by the administration, operator or smart contract."

  - name: InstrumentRevision
    label: Instrument Revision
    description: "The current revision figure to ensure the modification provided is based on the latest version."
    type: uint
    size: 4
    example: 0
    notes: "Cannot be Amended"

  - name: Amendments
    label: Amendments
    type: Amendment[]
    description: A collection of modifications to perform on this instrument.

  - name: RefTxID
    label: Ref Tx ID
    description: "The Bitcoin transaction ID of the associated result action that permitted the modifications. See Governance for more details."
    type: TxId

  - name: InstrumentPayloadVersion
    label: Instrument Payload Version
    description: "This field is set by the decoder and should not be set outside of that. The version of the encoding of the payload. v0 is protobuf and v1 is BSOR."
    type: uint
    size: 1
